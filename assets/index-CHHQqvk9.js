var z=Object.defineProperty;var U=(r,e,t)=>e in r?z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var s=(r,e,t)=>U(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();class K{constructor(){s(this,"successCount");s(this,"errorCount");s(this,"cache");s(this,"downloadQueue");this.successCount=0,this.errorCount=0,this.cache={},this.downloadQueue=[]}queueDownload(e){console.log("Queueing "+e),this.downloadQueue.push(e)}isDone(){return this.downloadQueue.length===this.successCount+this.errorCount}downloadAll(e){this.downloadQueue.length===0&&setTimeout(e,10);for(var t=0;t<this.downloadQueue.length;t++){var i=this,n=this.downloadQueue[t];console.log(n);var a=n.substring(n.length-3).toLowerCase();switch(a){case"jpg":case"png":var h=new Image;h.addEventListener("load",function(){console.log("Loaded "+this.src),i.successCount++,i.isDone()&&e()}),h.addEventListener("error",function(){console.log("Error loading "+this.src),i.errorCount++,i.isDone()&&e()}),h.src=n,this.cache[n]=h;break;case"wav":case"mp3":case"mp4":var d=new Audio;d.addEventListener("loadeddata",function(){console.log("Loaded "+this.src),i.successCount++,i.isDone()&&e()}),d.addEventListener("error",function(){console.log("Error loading "+this.src),i.errorCount++,i.isDone()&&e()}),d.addEventListener("ended",function(){d.pause(),d.currentTime=0}),d.src=n,d.load(),this.cache[n]=d;break}}}getAsset(e){return this.cache[e]}playAsset(e){let t=this.cache[e];if(!t){console.error(`Audio asset not found: ${e}`);return}if(t.loop){t.paused&&t.play().catch(n=>console.warn("Autoplay blocked:",n));return}let i=t.cloneNode();i.currentTime=0,i.volume=t.volume,i.play()}playBackgroundMusic(e){let t=this.cache[e];if(!t){console.error(`Background music not found: ${e}`);return}t.loop=!0,t.paused&&(t.currentTime=0,t.play().catch(i=>console.warn("Autoplay blocked:",i)))}muteAudio(e){for(var t in this.cache){let i=this.cache[t];i instanceof Audio&&(i.muted=e)}}adjustVolume(e){for(var t in this.cache){let i=this.cache[t];i instanceof Audio&&(i.volume=e)}}pauseBackgroundMusic(){for(var e in this.cache){let t=this.cache[e];t instanceof Audio&&(t.pause(),t.currentTime=0)}}autoRepeat(e){var t=this.cache[e];t.addEventListener("ended",function(){t.play()})}}class ${constructor(){s(this,"gameTime");s(this,"maxStep");s(this,"lastTimestamp");this.gameTime=0,this.maxStep=.05,this.lastTimestamp=0}tick(){const e=Date.now(),t=(e-this.lastTimestamp)/1e3;this.lastTimestamp=e;const i=Math.min(t,this.maxStep);return this.gameTime+=i,i}}class c{constructor(e,t="",i=!1){s(this,"game");s(this,"id","");s(this,"persistent",!1);s(this,"removeFromWorld",!1);s(this,"hidden",!1);if(this.constructor==c)throw new Error("Abstract classes can't be instantiated.");this.game=e,this.id=t,this.persistent=i,i&&e.registerPersistentGameObject(t,this)}init(){throw new Error("Method 'init()' must be implemented.")}loadSharedData(){const e=this.game.getSharedDataByKey(this.id);for(const t in e)this[t]=e[t];this.game.removeSharedDataByKey(this.id)}update(){throw new Error("Method 'update()' must be implemented.")}draw(e){throw new Error("Method 'draw()' must be implemented.")}deload(){this.removeFromWorld=!0}restore(){this.removeFromWorld=!1}onMouseDown(e){}onMouseUp(e){}}class q extends c{constructor(t,i){super(t);s(this,"game");s(this,"pot");s(this,"isOn");s(this,"gameWon");s(this,"gameOver");this.game=t,this.isOn=!1,this.pot=i,this.gameWon=!1,this.gameOver=!1}update(){if(this.isOn&&(this.pot.liters++,console.log(this.pot.liters)),!this.isOn&&this.pot.liters>0){if(this.pot.liters>=700&&this.pot.liters<800&&!this.gameWon){this.gameWon=!0,console.log(this.gameWon);const t=this.game.getSharedDataByKey("riceCooker"),i=t?t.amount+5:5;this.game.addSharedData("riceCooker",{amount:i}),setTimeout(()=>{this.game.sceneManager.loadScene("rice")},2e3)}else this.gameWon=!1;this.gameOver=!0}}draw(t){this.isOn?t.drawImage(o.getAsset("./assets/objects/Faucet_On.png"),565,248):t.drawImage(o.getAsset("./assets/objects/Faucet_Off.png"),565,285),t.beginPath(),t.strokeStyle="red",t.rect(550,285,50,50),t.stroke()}faucetManager(t,i){t>=550&&t<=600&&i>=285&&i<=330&&!this.isOn?(this.isOn=!0,console.log(this.isOn)):t>=550&&t<=600&&i>=285&&i<=330&&this.isOn&&(this.isOn=!1,console.log(this.isOn))}}class J{constructor(e){s(this,"ctx");s(this,"entities");s(this,"persistentGameObjects");s(this,"click");s(this,"mouse");s(this,"move");s(this,"down");s(this,"previousMousePositionsDelay");s(this,"previousMousePositionsDelayCounter");s(this,"previousMousePositions");s(this,"previousMousePositionsLatest");s(this,"wheel");s(this,"keys");s(this,"options");s(this,"sceneManager");s(this,"currentScene");s(this,"hud");s(this,"sharedData");s(this,"timer");s(this,"running");s(this,"rightclick");s(this,"clockTick");this.ctx=null,this.entities=[],this.persistentGameObjects={},this.click=null,this.mouse=null,this.down=null,this.previousMousePositionsDelay=3,this.previousMousePositionsDelayCounter=0,this.previousMousePositions=[],this.previousMousePositionsLatest=0,this.wheel=null,this.keys={},this.options=e||{debugging:!1},this.sceneManager=null,this.currentScene=null,this.hud=null,this.sharedData={}}init(e){this.ctx=e,this.startInput(),this.timer=new $}start(){this.running=!0;const e=()=>{this.loop(),requestAnimFrame(e,this.ctx.canvas)};e()}startInput(){var e=t=>{let i=this.ctx.canvas.getBoundingClientRect(),n=this.ctx.canvas.width/i.width,a=this.ctx.canvas.height/i.height,h=(t.clientX-i.left)*n,d=(t.clientY-i.top)*a;return{x:h,y:d}};this.ctx.canvas.addEventListener("mousemove",t=>{this.move=e(t),this.mouse=e(t),this.previousMousePositionsDelayCounter++,this.previousMousePositionsDelayCounter>=this.previousMousePositionsDelay&&(this.previousMousePositions.length>=15&&this.previousMousePositions.shift(),this.previousMousePositions.push(this.mouse),this.previousMousePositionsDelayCounter=0,this.previousMousePositionsLatest=this.timer.gameTime)}),this.ctx.canvas.addEventListener("mouseup",t=>{const i=e(t),n={...t,x:i.x,y:i.y};this.down=!1,this.entities.forEach(a=>{a.onMouseUp&&a.onMouseUp(n)})},!1),this.ctx.canvas.addEventListener("mousedown",t=>{const i=e(t),n={...t,x:i.x,y:i.y};this.down=!0,this.entities.forEach(a=>{a.onMouseDown&&a.onMouseDown(n)}),this.options.debugging&&this.addEntity(new Q(this,n.x,n.y))},!1),this.ctx.canvas.addEventListener("click",t=>{this.entities.forEach(i=>{i instanceof q&&i.faucetManager(e(t).x,e(t).y)}),this.options.debugging&&(console.log("CLICK",e(t)),console.log(t)),this.click=e(t)}),this.ctx.canvas.addEventListener("wheel",t=>{this.options.debugging&&console.log("WHEEL",e(t),t.wheelDelta),t.preventDefault(),this.wheel=t}),this.ctx.canvas.addEventListener("contextmenu",t=>{this.options.debugging&&console.log("RIGHT_CLICK",e(t)),t.preventDefault(),this.rightclick=e(t)}),document.body.addEventListener("dndDrop",t=>{this.entities.forEach(i=>{i.onDnDDrop&&i.onDnDDrop(t)})},!1),this.ctx.canvas.addEventListener("keydown",t=>this.keys[t.key]=!0),this.ctx.canvas.addEventListener("keyup",t=>this.keys[t.key]=!1)}addEntity(e){this.entities.push(e)}draw(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(let e=0;e<this.entities.length;e++)this.entities[e].draw(this.ctx,this)}update(){let e=this.entities.length;for(let t=0;t<e;t++){let i=this.entities[t];if(i.removeFromWorld||i.update(),e!==this.entities.length){let n=e-this.entities.length;e=this.entities.length,t-=n}}for(let t=this.entities.length-1;t>=0;--t)this.entities[t].removeFromWorld&&this.entities.splice(t,1)}loop(){this.clockTick=this.timer.tick(),this.update(),this.draw()}getSceneManager(){if(!this.sceneManager)throw new Error("SceneManager is not initialized");return this.sceneManager}getHUD(){if(!this.hud)throw new Error("HUD is not initialized");return this.hud}getSharedData(){return this.sharedData}getSharedDataByKey(e){return this.sharedData[e]}getSharedDataByKeyAndDefault(e,t){return this.sharedData[e]===void 0?t:this.sharedData[e]}addSharedData(e,t){this.sharedData[e]={...t}}removeSharedDataByKey(e){delete this.sharedData[e]}registerPersistentGameObject(e,t){this.persistentGameObjects[e]=t}getPersistentGameObject(e){return this.persistentGameObjects[e]}removePersistentGameObject(e){delete this.persistentGameObjects[e]}clearPersistentGameObjects(){this.persistentGameObjects={}}}class Q extends c{constructor(t,i,n){super(t);s(this,"x");s(this,"y");this.x=i,this.y=n}update(){}draw(t){t.fillStyle="red",t.fillRect(this.x,this.y,5,5)}}let x=class extends c{constructor(t,i,n=0,a=0,h=0,d=0){super(t,"background");s(this,"game");s(this,"spritesheet");s(this,"x");s(this,"y");s(this,"width");s(this,"height");this.game=t,this.spritesheet=o.getAsset(i),this.x=n,this.y=a,h==0&&d==0?(this.width=this.spritesheet.width,this.height=this.spritesheet.height):(this.width=h,this.height=d)}update(){}draw(t){t.drawImage(this.spritesheet,this.x,this.y,this.width,this.height)}};class m extends c{constructor(t,i,n,a){super(t,"button");s(this,"image");s(this,"x");s(this,"y");s(this,"width");s(this,"height");s(this,"bgColor");s(this,"text");s(this,"hidden");this.x=i,this.y=n,this.onClick=a,this.hidden=!1}static imageButton(t,i,n,a,h){let d=new m(t,i,n,h);return Object.assign(d,{image:o.getAsset(a)}),d}static rectButton(t,i,n,a,h,d,u=""){let g=new m(t,i,n,d);return Object.assign(g,{width:a,height:h,bgColor:"gray",text:u}),g}static rectButtonImage(t,i,n,a,h,d,u){let g=new m(t,i,n,u);return Object.assign(g,{width:a,height:h,image:o.getAsset(d),transparent:!0}),g.draw=function(p){if(p.fillStyle="lightgray",p.fillRect(this.x,this.y,this.width,this.height),this.image){const w=Math.min(this.width,this.height)*.8;p.drawImage(this.image,this.x+(this.width-w)/2,this.y+(this.height-w)/2,w,w)}else console.error(`Image not found for button: ${d}`)},g}update(){}onMouseDown(t){this.hidden||(this.image?t.x>this.x&&t.x<this.x+this.image.width&&t.y>this.y&&t.y<this.y+this.image.height&&this.onClick():t.x>this.x&&t.x<this.x+this.width&&t.y>this.y&&t.y<this.y+this.height&&this.onClick())}onClick(){throw new Error("Method not implemented.")}draw(t){this.hidden||(this.image?t.drawImage(this.image,this.x,this.y):(t.fillStyle=this.bgColor,t.fillRect(this.x,this.y,this.width,this.height),t.lineWidth=2,t.strokeStyle="black",t.strokeRect(this.x,this.y,this.width,this.height),t.fillStyle="black",t.font="36px serif",t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,this.x+this.width/2,this.y+this.height/2+5)))}}class b extends c{constructor(t,i,n,a){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"onClick");s(this,"dragging");s(this,"transparent");s(this,"image");s(this,"bgColor");s(this,"width");s(this,"height");this.game=t,this.x=i,this.y=n,this.onClick=a,this.dragging=!1}static imageButton(t,i,n,a,h){let d=new b(t,i,n,h);return Object.assign(d,{image:o.getAsset(a)}),d}static transparentImageButton(t,i,n,a,h,d,u){let g=new b(t,i,n,u);return Object.assign(g,{width:a,height:h,image:o.getAsset(d),transparent:!0}),g}static rectButton(t,i,n,a,h,d,u){let g=new b(t,i,n,u);return Object.assign(g,{width:a,height:h,bgColor:d}),g}update(){}draw(t){this.game.options.debugging&&(t.strokeStyle="blue",t.strokeRect(this.x,this.y,this.width,this.height),this.image&&(t.strokeStyle="green")),!(this.transparent&&!this.dragging)&&(this.image?this.dragging?t.drawImage(this.image,this.game.mouse.x-this.image.width/2,this.game.mouse.y-this.image.height/2):t.drawImage(this.image,this.x,this.y):this.dragging?(t.fillStyle=this.bgColor,t.fillRect(this.game.mouse.x-this.width/2,this.game.mouse.y-this.height/2,this.width,this.height)):(t.fillStyle=this.bgColor,t.fillRect(this.x,this.y,this.width,this.height),t.lineWidth=2,t.strokeStyle="black",t.strokeRect(this.x,this.y,this.width,this.height)))}onMouseDown(t){this.image&&!this.transparent?t.x>this.x&&t.x<this.x+this.image.width&&t.y>this.y&&t.y<this.y+this.image.height&&(this.dragging=!0,this.onClick()):t.x>this.x&&t.x<this.x+this.width&&t.y>this.y&&t.y<this.y+this.height&&(this.dragging=!0,this.onClick())}onMouseUp(t){if(this.dragging){this.dragging=!1;const i=new CustomEvent("dndDrop",{detail:{x:t.x,y:t.y,button:this}});document.body.dispatchEvent(i)}}}class f{constructor(e){s(this,"game");s(this,"gameObjects");if(this.constructor==f)throw new Error("Abstract classes can't be instantiated.");this.game=e,this.gameObjects=[]}initalizeScene(){}addGameObject(e){this.gameObjects.push(e),this.game.addEntity(e)}addPersistantGameObject(e){let t=this.game.getPersistentGameObject(e);return t?(this.addGameObject(t),!0):!1}deload(){this.gameObjects.forEach(e=>{e.persistent||e.deload()}),this.gameObjects=[]}draw(e){}update(){}}class Y extends f{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"startButton");this.game=t,this.x=i,this.y=n}initalizeScene(){this.addGameObject(new x(this.game,"./assets/backgrounds/Title_Background.png")),this.startButton=m.imageButton(this.game,426,400,"./assets/button/Start_Button.png",()=>{o.playBackgroundMusic("./assets/sounds/background_music.mp3"),M.loadScene("order")}),this.addGameObject(this.startButton),this.game.getHUD().setState("hidden")}}class X extends c{constructor(t,i,n,a,h){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"width");s(this,"height");s(this,"progress");this.game=t,this.x=i,this.y=n,this.width=a,this.height=h,this.progress=.01}update(){if(this.progress>=1){this.game.win=!0;const t=this.game.addSharedData("riceCooker"),i=t?t.amount+5:5;this.game.addSharedData("riceCooker",{amount:i}),setTimeout(()=>{this.game.sceneManager.loadScene("rice")},2e3);return}this.game.spinning&&this.progress<1&&(this.progress+=.001)}draw(t){t.fillStyle="green",t.fillRect(this.x,this.y,this.width*this.progress,this.height)}}const O=(r,e)=>Math.random()*(e-r)+r,V=(r,e)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2));class Z extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");this.game=t,this.x=i,this.y=n}update(){if(this.game.timer.gameTime-this.game.previousMousePositionsLatest>.5&&(this.game.previousMousePositions=[],this.game.spinning=!1),this.game.previousMousePositions.length===15){let t=this.game.previousMousePositions.reduce((n,a)=>({x:n.x+a.x,y:n.y+a.y}),{x:0,y:0});if(t.x/=15,t.y/=15,V(t,{x:this.x,y:this.y})>250){this.game.spinning=!1;return}let i=this.game.previousMousePositions.reduce((n,a)=>n+Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2)),0);i/=15,i<200?(console.log("spinning"),this.game.spinning=!0):this.game.spinning=!1}}draw(t){const a=o.getAsset("./assets/pot_top.png");t.drawImage(a,this.x-750/2,this.y-750/2,750,750)}}class tt extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");this.game=t,this.x=i,this.y=n}update(){}draw(t){const a=o.getAsset("./assets/pot_top_outside.png");t.drawImage(a,this.x-750/2,this.y-750/2,750,750)}}const T=["#f5f5f5","#f8f8f8","#fafafa","#fcfcfc","#ffffff","#fefefe","#fdfdfd","#fbfbfb","#f7f7f7","#f4f4f4"];class et extends c{constructor(t,i,n,a,h){super(t);s(this,"game");s(this,"angle");s(this,"distance");s(this,"centerX");s(this,"centerY");s(this,"x");s(this,"y");s(this,"rotation");s(this,"color");this.game=t,this.angle=i,this.distance=n,this.centerX=a,this.centerY=h,this.x=0,this.y=0,this.rotation=O(0,Math.PI*2),this.color=T[Math.floor(Math.random()*T.length)]}update(){this.game.spinning&&(this.angle+=Math.PI/180),this.x=this.distance*Math.cos(this.angle)+this.centerX,this.y=this.distance*Math.sin(this.angle)+this.centerY}draw(t){t.strokeStyle="black",t.fillStyle=this.color,t.beginPath(),t.ellipse(this.x,this.y,20,4,this.rotation,0,2*Math.PI),t.stroke(),t.fill()}}class st extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"angle");this.game=t,this.x=i,this.y=n,this.angle=Math.PI/3}update(){this.angle+=Math.PI/180}draw(t){const a=o.getAsset("./assets/rotate.png");t.save(),t.translate(1024/2,768/2),t.rotate(this.angle),t.drawImage(a,-450/2,-450/2,450,450),t.restore()}}class it extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");this.game=t,this.x=i,this.y=n}update(){this.game.mouse&&(this.x=this.game.mouse.x,this.y=this.game.mouse.y)}draw(t){const a=o.getAsset("./assets/hand.png");t.drawImage(a,this.x-300/2,this.y-300/2,300,300)}}class nt extends c{constructor(t,i,n,a){super(t);s(this,"game");s(this,"ASSET_MANAGER");s(this,"x");s(this,"y");s(this,"start");s(this,"show");s(this,"timeShown");s(this,"timesFlashed");s(this,"audioPlayed");this.game=t,this.ASSET_MANAGER=i,this.x=n,this.y=a,this.start=!1,this.show=!1,this.timeShown=0,this.timesFlashed=0,this.audioPlayed=!1}update(){this.game.win&&(this.start=!0,this.audioPlayed||(this.ASSET_MANAGER.playAsset("./assets/sounds/jingle.mp3"),this.audioPlayed=!0)),this.start&&this.timesFlashed<6&&(this.timeShown++,this.timeShown>=20&&(this.show=!this.show,this.timeShown=0,this.timesFlashed++))}draw(t){this.show&&t.drawImage(o.getAsset("./assets/checkmark.png"),this.x-500/2,this.y-500/2,500,500)}}const D=1024,S=768,ot=250;class at extends f{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"spritesheet");this.game=t,this.spritesheet=o.getAsset("./assets/backgrounds/Station_Background.png"),this.x=i,this.y=n}initalizeScene(){super.addGameObject(new ht(this.game,0,0)),super.addGameObject(new Z(this.game,D/2,S/2)),super.addGameObject(new X(this.game,0,S-20,1024,20));let t=2;for(let i=0;i<ot;i+=20){for(let n=0;n<Math.PI*2;n+=Math.PI*2/t){let a=new et(this.game,n,i,D/2,S/2);super.addGameObject(a)}t+=10}super.addGameObject(new tt(this.game,D/2,S/2)),super.addGameObject(new st(this.game,D/2,S/2)),super.addGameObject(new it(this.game,0,0)),super.addGameObject(new nt(this.game,o,D/2,S/2))}}let ht=class extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"spritesheet");this.game=t,this.x=i,this.y=n,this.spritesheet=o.getAsset("./assets/backgrounds/Station_Background.png")}update(){}draw(t){t.drawImage(this.spritesheet,0,0)}};class P extends c{constructor(e,t){super(e),this.gameEngine=e,this.totalTime=t,this.elapsedTime=0,this.isCooking=!1,this.isDone=!1,this.result=null,this.perfectStart=this.totalTime*.8,this.perfectEnd=this.totalTime,this.x=237,this.y=650,this.width=550,this.height=20}start(){!this.isCooking&&!this.isDone&&(this.isCooking=!0,this.elapsedTime=0,this.result=null)}stop(){if(this.isCooking)if(this.isCooking=!1,this.isDone=!0,this.elapsedTime<this.perfectStart)this.result="undercooked";else if(this.elapsedTime>=this.perfectStart&&this.elapsedTime<=this.perfectEnd){this.result="perfect";const e=this.game.getSharedDataByKey("riceCooker"),t=e?e.amount+5:5;this.game.addSharedData("riceCooker",{amount:t}),setTimeout(()=>{this.game.sceneManager.loadScene("rice")},2e3)}else this.result="overcooked"}update(){this.isCooking&&(this.elapsedTime+=this.gameEngine.clockTick,this.elapsedTime>=this.totalTime&&this.stop())}draw(e){e.fillStyle="lightgray",e.fillRect(this.x,this.y,this.width,this.height);const t=this.elapsedTime/this.totalTime*this.width;e.fillStyle="blue",e.fillRect(this.x,this.y,t,this.height);const i=this.x+this.perfectStart/this.totalTime*this.width,n=this.x+this.perfectEnd/this.totalTime*this.width;e.fillStyle="rgba(0, 255, 0, 0.3)",e.fillRect(i,this.y,n-i,this.height),this.isDone&&(e.fillStyle="black",e.font="16px Arial",e.fillText(`Result: ${this.result}`,this.x,this.y+this.height+20))}}let rt=class extends c{constructor(t){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"w");s(this,"h");this.game=t,this.x=237,this.y=100,this.w=550,this.h=525,this.clicked=!1}onMouseDown(t){this.isClicked(t.x,t.y)&&this.handleClick()}onMouseUp(t){this.isClicked(t.x,t.y)&&this.handleClick()}isClicked(t,i){return t>=this.x&&t<=this.x+this.w&&i>=this.y&&i<=this.y+this.h}handleClick(){const t=this.game.entities.find(i=>i instanceof P);t&&(this.clicked?(this.clicked=!1,t.stop()):(this.clicked=!0,t.start()))}update(){}draw(t){const i=o.getAsset("./assets/objects/RiceCooker_Off.png"),n=o.getAsset("./assets/objects/RiceCooker_On.png");t.drawImage(i,this.x,this.y,this.w,this.h),this.clicked&&(t.drawImage(n,this.x,this.y,this.w,this.h),t.strokeStyle="red",t.lineWidth=3,t.strokeRect(this.x,this.y,this.w,this.h))}};class dt extends f{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");this.game=t,this.x=i,this.y=n}initalizeScene(){this.addGameObject(new ct(this.game,0,0));let t=new P(this.game,10),i=new rt(this.game);this.addGameObject(i),this.addGameObject(t)}}let ct=class extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"spritesheet");this.game=t,this.x=i,this.y=n,this.spritesheet=o.getAsset("./assets/backgrounds/Minigame_Background.png")}update(){}draw(t){t.drawImage(this.spritesheet,0,0)}};class ut extends c{constructor(t){super(t);s(this,"game");s(this,"liters");s(this,"spritesheet");s(this,"width");s(this,"height");s(this,"x");s(this,"y");this.game=t,this.liters=0,this.spritesheet=o.getAsset("./assets/objects/Pot_Animation.png"),this.width=380,this.height=300,this.x=322,this.y=386}update(){}draw(t){this.liters==0?t.drawImage(this.spritesheet,0,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=100?t.drawImage(this.spritesheet,380,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=200?t.drawImage(this.spritesheet,760,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=300?t.drawImage(this.spritesheet,1140,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=400?t.drawImage(this.spritesheet,1520,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=500?t.drawImage(this.spritesheet,1900,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=600?t.drawImage(this.spritesheet,2280,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=700?t.drawImage(this.spritesheet,2660,0,this.width,this.height,this.x,this.y,this.width,this.height):this.liters<=800?t.drawImage(this.spritesheet,3040,0,this.width,this.height,this.x,this.y,this.width,this.height):t.drawImage(this.spritesheet,3420,0,this.width,this.height,this.x,this.y,this.width,this.height)}}class gt extends f{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");this.game=t,this.x=i,this.y=n}initalizeScene(){this.addGameObject(new lt(this.game,0,0));const t=new ut(this.game);this.addGameObject(t),this.addGameObject(new q(this.game,t))}}let lt=class extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"spritesheet");this.game=t,this.x=i,this.y=n,this.spritesheet=o.getAsset("./assets/backgrounds/FillThePot_Background.png")}update(){}draw(t){t.drawImage(this.spritesheet,0,0)}};class R{constructor(e,t,i){s(this,"ingredients");s(this,"sides");s(this,"condiment");this.ingredients=e,this.sides=t,this.condiment=i}}class l{constructor(e,t=""){s(this,"name");s(this,"img");this.name=e,this.img=t}}class I{constructor(e,t){s(this,"name");s(this,"type");this.name=e,this.type=t}}class j{constructor(e){s(this,"type");this.type=e}}const A=new l("nori","./assets/objects/Nori.png"),_=new l("rice","./assets/objects/Rice.png"),mt="./assets/objects/Rice_Cooked.png",pt=new l("avocado","./assets/assembly/avocado.png"),wt=new l("crab","./assets/assembly/crab.png"),ft=new l("cucumber","./assets/assembly/cucumber.png"),yt=new l("octopus","./assets/assembly/octopus.png"),bt=new l("salmon","./assets/assembly/salmon.png"),kt=new l("tuna","./assets/assembly/tuna.png"),St=new l("uni","./assets/assembly/uni.png"),xt=new l("tamago","./assets/assembly/tamago.png"),v=[A,_],W=[pt,wt,ft,yt,bt,kt,St,xt],Dt=new I("karaage",[new l("chicken")]),Bt=new I("miso soup",[new l("miso"),new l("green onion"),new l("tofu")]),Ot=new I("edamame",[new l("edamame")]),Mt=new I("gyoza",[new l("chicken"),new l("green onions")]),It=[Dt,Bt,Ot,Mt],vt=new j("wasabi"),Ct=new j("ginger"),At=new j("soy sauce"),G=[vt,Ct,At],jt={money:0,gameTime:0,timeSinceDayStart:0,orders:[],orderWorkingOn:null,currentDraggedItem:null},k=class k{constructor(){s(this,"state",{...jt})}static getInstance(){return k.instance||(k.instance=new k),k.instance}setState(e,t){return this.state[e]=t,this.state[e]}getState(e){return this.state[e]}getAndMofifyState(e,t){const i=this.state[e],n=t(i);return this.state[e]=n,n}addOrder(e,t){this.state.orders.push({customer:e,order:t})}completeOrder(e){this.state.orders=this.state.orders.filter(t=>t.order!==e)}};s(k,"instance");let y=k;class Et extends c{constructor(t,i,n){super(t,"customer",!0);s(this,"game");s(this,"x");s(this,"y");s(this,"yDrawOffset");s(this,"spritesheet");s(this,"exclamationSprite");s(this,"width");s(this,"height");s(this,"state");s(this,"order");s(this,"okButton");this.game=t,this.x=i,this.y=n,this.yDrawOffset=0,this.spritesheet=o.getAsset(this.randomCustomer()),this.exclamationSprite=o.getAsset("./assets/button/exclam.png"),this.width=400,this.height=600,this.state="init",this.order=null,this.addButton(),o.playAsset("./assets/sounds/doorchime.mp3"),console.log("Customer created")}update(){switch(this.state){case"init":this.state="walking";let t=this;async function i(){await t.walkTo(100,100),t.state="waiting"}i();break}}draw(t){switch(this.game.options.debugging&&(t.strokeStyle="red",t.strokeRect(this.x,this.y,this.width,this.height)),t.drawImage(this.spritesheet,this.x,this.y+this.yDrawOffset,this.width,this.height),this.state){case"init":break;case"walking":break;case"waiting":t.drawImage(this.exclamationSprite,this.x+this.spritesheet.width/2-this.exclamationSprite.width/2-10,this.y-30,100,100);break;case"order":this.drawOrder(t);break}}drawOrder(t){if(!this.order)return;const i=500,n=100,a=(v.length+3+G.length+1)*40;t.fillStyle="white",t.fillRect(i,n,200,a),t.fillStyle="black",t.strokeRect(i,n,200,a),t.font="20px Arial",t.textAlign="center";let h=n;this.order.ingredients.forEach(d=>{if(d.name==="rice"||d.name==="nori")t.fillText(d.name,600,n+h);else{const u=o.getAsset(d.img);t.drawImage(u,600-u.width/2,n+h),h+=u.height}h+=30}),this.order.sides.forEach(d=>{t.fillText(d.name,600,100+h),h+=30})}async walkTo(t,i){let n=this;return new Promise(a=>{let h=0;function d(){const g=Math.abs(n.x-t),p=Math.abs(n.y-i),w=t-n.x,B=i-n.y,E=Math.sqrt(w*w+B*B),H=w/E,L=B/E,F=Math.min(H*5,g),N=Math.min(L*5,p);if(n.x!==t&&(n.x+=F),n.x!==t&&(n.y+=N),n.x===t&&n.y===i){a(!0);return}n.yDrawOffset=Math.sin(Math.PI/4*h)*10,requestAnimationFrame(d),h+=.1}d()})}displayOrder(){this.order=this.randomOrder()}addButton(){if(console.log("Adding button"),!this.game.currentScene)throw new Error("No current scene found");this.game.currentScene.addPersistantGameObject("okButton")||(this.okButton=m.rectButton(this.game,750,400,100,50,()=>{this.okButton&&(console.log("OK button pressed"),console.log(this.okButton),this.okButton.hidden=!0,y.getInstance().addOrder(this,this.order))},"OK"),this.okButton.persistent=!0,this.okButton.id="okButton",this.okButton.hidden=!0,this.game.registerPersistentGameObject("okButton",this.okButton),this.game.currentScene&&this.game.currentScene.addGameObject(this.okButton))}randomOrder(){function t(p,w){return p.slice().sort(()=>.5-Math.random()).slice(0,w)}const i=O(2,v.length),n=O(1,3),a=O(0,1),h=t(v,i),d=t(W,n),u=t(G,1),g=t(It,a);return new R([...h,...d],[...g],u[0])}randomCustomer(){return"./assets/characters/Customer_"+(Math.floor(Math.random()*6)+0)+".png"}onMouseDown(t){this.state==="waiting"&&t.x>this.x&&t.x<this.x+this.width&&t.y>this.y&&t.y<this.y+this.height&&(this.displayOrder(),this.okButton.hidden=!1,this.state="order")}}class Tt extends f{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");this.game=t,this.x=i,this.y=n}initalizeScene(){this.addGameObject(new x(this.game,"./assets/backgrounds/Order_Background.png")),this.addPersistantGameObject("customer")||(console.log("Did not find customer"),this.addGameObject(new Et(this.game,500,25))),this.addGameObject(new x(this.game,"./assets/backgrounds/Order_Foreground.png"))}}class Gt extends f{constructor(t){super(t);s(this,"game");this.game=t}initalizeScene(){super.addGameObject(new x(this.game,"./assets/backgrounds/Station_Background.png")),super.addGameObject(new Rt(this.game,450,375));const t=new qt(this.game,10,10,430,430);super.addGameObject(t);const i=new Pt(this.game,500,80,450,300);super.addGameObject(i)}}class qt extends c{constructor(t,i,n,a,h){super(t,"riceCooker");s(this,"game");s(this,"x");s(this,"y");s(this,"width");s(this,"height");s(this,"amount");s(this,"cookerClicked");s(this,"spritesheet");s(this,"dnd");this.game=t,this.x=i,this.y=n,this.width=a,this.height=h,this.amount=1,this.cookerClicked=!1,this.spritesheet=o.getAsset("./assets/objects/RiceCooker.png"),this.addButton(),super.loadSharedData()}addButton(){this.dnd=b.transparentImageButton(this.game,this.x,this.y,this.width,this.height,mt,()=>{console.log("clicked on rice cooker"),this.cookerClicked=!0}),this.dnd.width=this.width,this.dnd.height=this.height,this.dnd.food=_,this.dnd.id="ricesourcebuttons",this.game.currentScene&&this.game.currentScene.addGameObject(this.dnd)}update(){this.cookerClicked&&(this.amount==0&&(this.beginMinigame(),this.amount=5),this.amount--,this.cookerClicked=!1)}draw(t){t.drawImage(this.spritesheet,this.x,this.y),this.game.options.debugging&&(t.strokeStyle="red")}beginMinigame(){const t=Math.floor(Math.random()*3);console.log(t),t==0?(this.game.getSceneManager().loadScene("fill"),console.log("minigame 1")):t==1?(this.game.getSceneManager().loadScene("burn"),console.log("minigame 2")):t==2&&(this.game.getSceneManager().loadScene("wash"),console.log("minigame 3"))}}class Pt extends c{constructor(t,i,n,a,h){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"width");s(this,"height");s(this,"noriSourceSprite");s(this,"dnd");this.game=t,this.x=i,this.y=n,this.width=a,this.height=h,this.noriSourceSprite=o.getAsset("./assets/objects/Nori_Source.png"),this.addButton()}addButton(){this.dnd=b.transparentImageButton(this.game,this.x,this.y,this.width,this.height,A.img,()=>{}),this.dnd.width=this.width,this.dnd.height=this.height,this.dnd.food=A,this.game.currentScene&&this.game.currentScene.addGameObject(this.dnd)}update(){}draw(t){t.drawImage(this.noriSourceSprite,this.x,this.y)}}class Rt extends c{constructor(t,i,n){super(t);s(this,"game");s(this,"x");s(this,"y");s(this,"spritesheet");this.game=t,this.x=i,this.y=n,this.spritesheet=o.getAsset("./assets/objects/BambooMat.png")}update(){}draw(t){t.drawImage(this.spritesheet,this.x,this.y),this.x+this.spritesheet.width/2,this.y+this.spritesheet.height/2;const i=y.getInstance().getState("orderWorkingOn");i&&i.ingredients.forEach(n=>{const a=o.getAsset(n.img);t.drawImage(a,this.x,this.y)})}onDnDDrop(t){if(t.detail.x>=this.x&&t.detail.x<=this.x+this.spritesheet.width&&t.detail.y>=this.y&&t.detail.y<=this.y+this.spritesheet.height){console.log("dropped in food bottom");let i=y.getInstance().getState("orderWorkingOn");if(!i){let n=new R([],[],null);i=y.getInstance().setState("orderWorkingOn",n)}i.ingredients.push(t.detail.button.food)}}}class _t extends f{constructor(t){super(t);s(this,"game");s(this,"foodBottom");s(this,"rollButton");this.game=t}initalizeScene(){this.addGameObject(new x(this.game,"./assets/backgrounds/Station_Background.png")),this.addGameObject(new x(this.game,"./assets/assembly/case.jpg",0,150,1024,197)),this.foodBottom=new Ht(this.game,227,375,570,300),this.addGameObject(this.foodBottom);const t=80,i=80,n=W;let a=0,h=240;for(let d=0;d<n.length;d++){const u=new Wt(this.game,n[a],10+d*(t+4),h,t,i);this.addGameObject(u),u.addButton(),a++}this.rollButton=m.rectButton(this.game,600,320,100,50,()=>{console.log("Clicked roll button"),this.roll()},"Roll"),this.rollButton.hidden=!0,this.addGameObject(this.rollButton)}roll(){console.log("rolling"),this.rollButton.removeFromWorld=!0,this.foodBottom.rolled=!0}}class Wt extends c{constructor(t,i,n,a,h,d){super(t,"foodbin");s(this,"game");s(this,"food");s(this,"x");s(this,"y");s(this,"width");s(this,"height");s(this,"dnd");this.game=t,this.food=i,this.x=n,this.y=a,this.width=h,this.height=d}addButton(){this.dnd=b.transparentImageButton(this.game,this.x,this.y,this.width,this.height,this.food.img,()=>{console.log("clicked on food bin",this.food)}),this.dnd.width=this.width,this.dnd.height=this.height,this.dnd.food=this.food,this.game.currentScene&&this.game.currentScene.addGameObject(this.dnd)}update(){}draw(t){t.drawImage(o.getAsset("./assets/trays/tray_"+this.food.name+".png"),this.x,this.y,this.width,this.height);const i=80,n=35;this.width-i,this.height-n}}const C=75;class Ht extends c{constructor(t,i,n,a,h){super(t,"foodbottom");s(this,"game");s(this,"x");s(this,"y");s(this,"width");s(this,"height");s(this,"rolled");s(this,"chops");s(this,"cut");s(this,"sliding");this.game=t,this.x=i,this.y=n,this.width=a,this.height=h,this.rolled=!1,this.chops=0,this.cut=!1,this.sliding=!1}update(){this.rolled&&(this.chops>=15&&(this.cut=!0,console.log("Cut sushi")),this.game.down?(this.game.timer.gameTime-this.game.previousMousePositionsLatest>.1&&(this.game.previousMousePositions=[]),this.game.previousMousePositions.length===15&&this.game.previousMousePositions.forEach((t,i)=>{t.x>this.x-this.width/2&&t.x<this.x+this.width/2&&t.y>this.y&&t.y<this.y+C&&(this.chops+=1)})):this.game.previousMousePositions=[])}draw(t){let i=y.getInstance().getState("orderWorkingOn");if(i&&(i==null?void 0:i.ingredients.length)>0){if(this.cut){t.fillStyle="green";const a=(this.width-50)/6;for(let h=0;h<6;h++)t.fillRect(this.x-5+(a+5)*h,this.y+100,a,C);if(this.sliding)return;setTimeout(()=>{setInterval(()=>{this.x+=10,this.x>1024&&(this.removeFromWorld=!0)},10)},1e3),this.sliding=!0;return}if(this.rolled){t.fillStyle="green",t.fillRect(this.x,this.y+100,this.width-50,C),this.game.down&&(t.beginPath(),this.game.previousMousePositions.forEach((a,h)=>{h===0?t.moveTo(a.x,a.y):t.lineTo(a.x,a.y)}),t.stroke());return}const n=o.getAsset("./assets/objects/BambooMat.png");t.drawImage(n,this.x,this.y),console.log(i),i.ingredients.filter(a=>a.name==="rice"||a.name==="nori").forEach(a=>{if(a.name=="rice"||a.name=="nori"){const h=o.getAsset(a.img);t.drawImage(h,this.x,this.y)}}),i.ingredients.filter(a=>a.name!="rice"&&a.name!="nori").forEach(a=>{const h=o.getAsset(a.img),d=50,u=(this.width-d-50)/6;for(let g=0;g<6;g++)t.drawImage(h,this.x+g*u+d,this.y+100,h.width*2,h.height*2)})}}onDnDDrop(t){let i=y.getInstance().getState("orderWorkingOn");i&&t.detail.x>=this.x&&t.detail.x<=this.x+this.width&&t.detail.y>=this.y&&t.detail.y<=this.y+this.height&&(i==null?void 0:i.ingredients.length)>0&&(console.log("dropped in food bottom"),i.ingredients.push(t.detail.button.food),t.detail.button.game.currentScene.rollButton.hidden=!1)}}class Lt extends f{constructor(e,t,i){super(e),Object.assign(this,{game:e,x:t,y:i})}initalizeScene(){this.addGameObject(new Ft(this.game)),this.addGameObject(new zt(this.game,200,300,600,370)),this.microwave=new Nt(this.game,200,0,600,300),this.addGameObject(this.microwave),this.microwave.addButtons(),[{name:"soy sauce",img:"./assets/sides/soysauce.png",x:800,y:300},{name:"ginger",img:"./assets/sides/Ginger.png",x:900,y:300},{name:"wasabi",img:"./assets/sides/wasabi.png",x:850,y:370}].forEach(t=>{this.addGameObject(new Ut(this.game,t,t.x,t.y,80,80))})}}class Ft extends c{constructor(e){super(e),Object.assign(this,{game:e})}update(){}draw(e){e.drawImage(o.getAsset("./assets/backgrounds/Station_Background.png"),0,0,1024,683)}}class Nt extends c{constructor(e,t,i,n,a){super(e),Object.assign(this,{game:e,x:t,y:i,width:n,height:a,ingredientButtons:[],ingredients:[],cookedSide:null}),this.recipes=[{name:"Miso Soup",ingredients:["miso paste","tofu","green onions"],img:"./assets/sides/MisoSoup.png"},{name:"Edamame",ingredients:["edamame"],img:"./assets/sides/edamame.png"},{name:"Gyoza",ingredients:["green onions","chicken"],img:"./assets/sides/Gyoza.png"},{name:"Karaage",ingredients:["chicken"],img:"./assets/sides/Karaage.png"}],this.cookButton=null}addButtons(){let e=250,t=200;const i=75,n=100;this.ingredientButtons=[],this.buttons=[];const a=[{name:"miso paste",img:"./assets/sides/MisoBin.png"},{name:"edamame",img:"./assets/sides/edamame.png"},{name:"tofu",img:"./assets/sides/Tofu.png"},{name:"chicken",img:"./assets/sides/chicken.png"},{name:"green onions",img:"./assets/sides/greenonions.png"}];for(let u=0;u<a.length;u++){let g=a[u];const p=m.rectButtonImage(this.game,e+u*n,t,i,i,g.img,()=>{console.log(`Added ${g.name} to microwave!`),this.addIngredient(new l(g.name))});this.ingredientButtons.push(p),this.game.currentScene.addGameObject(p)}const h=725,d=100;this.cookButton=m.rectButton(this.game,h,d,i,75,()=>{this.cookSideDish()},"Cook!"),this.cookButton.disabled=!0,this.game.currentScene.addGameObject(this.cookButton)}addIngredient(e){if(!e||!e.name){console.error("invalid ingredient added!");return}this.ingredients.push(e),console.log(`added ${e.name} to microwave.`)}cookSideDish(){console.log("cooking!");const e=this.ingredients.map(t=>t.name);for(let t of this.recipes)if(t.ingredients.every(i=>e.includes(i))&&e.length===t.ingredients.length){console.log(`${t.name} created`),this.cookedSide={name:t.name,img:t.img},this.ingredients=[];return}console.log("not matching recipe"),this.ingredients=[]}update(){this.cookButton&&(this.cookButton.disabled=this.ingredients.length===0)}draw(e){const t=o.getAsset("./assets/sides/microwave.png");if(e.drawImage(t,this.x,this.y,this.width,this.height),this.cookedSide&&this.cookedSide.img){const i=o.getAsset(this.cookedSide.img);i?e.drawImage(i,this.x+this.width/3,this.y+this.height/3,100,100):console.warn(` no image for ${this.cookedSide.name}`)}}}class zt extends c{constructor(e,t,i,n,a){super(e),Object.assign(this,{game:e,x:t,y:i,width:n,height:a,condiment:[]})}update(){}draw(e){e.drawImage(o.getAsset("./assets/sides/Tray.png"),this.x,this.y,this.width,this.height),this.condiment.forEach(t=>{const i=o.getAsset(t.img);e.drawImage(i,this.x+45,this.y+15)}),e.save(),e.strokeStyle="red",e.lineWidth=2,e.setLineDash([5,5]),e.strokeRect(this.x,this.y,this.width/4,this.height/4),e.restore()}onDnDDrop(e){if(console.log("dropped"),console.log(e),console.log(e.detail),e.detail.x>this.x&&e.detail.x<this.x+this.width/4&&e.detail.y>this.y&&e.detail.y<this.y+this.height/4){console.log("dropped in food tray"),this.condiment.push(e.detail.button.food),console.log(e.detail.button.food);const t=y.getInstance().getState("orderWorkingOn");if(!t)return;t.ingredients.push(new l(e.detail.button.food.name))}}}class Ut extends c{constructor(e,t,i,n,a,h){super(e),Object.assign(this,{game:e,food:t,x:i,y:n,width:a,height:h}),this.addButton()}addButton(){this.dnd=b.transparentImageButton(this.game,this.x,this.y,this.width,this.height,this.food.img,()=>{console.log("clicked on object",this.food)}),this.dnd.width=this.width,this.dnd.height=this.height,this.dnd.food=this.food,this.game.currentScene&&this.game.currentScene.addGameObject(this.dnd)}update(){}draw(e){e.drawImage(o.getAsset(this.food.img),this.x,this.y,this.width,this.height)}}class Kt{constructor(e){s(this,"game");s(this,"scenes");s(this,"currentScene");this.game=e,this.scenes={},this.currentScene=null,this.registerScene("title",new Y(this.game,0,0)),this.registerScene("order",new Tt(this.game,0,0)),this.registerScene("rice",new Gt(this.game)),this.registerScene("roll",new _t(this.game)),this.registerScene("sides",new Lt(this.game,0,0)),this.registerScene("burn",new dt(this.game,0,0)),this.registerScene("fill",new gt(this.game,0,0)),this.registerScene("wash",new at(this.game,0,0)),this.loadScene("title")}registerScene(e,t){this.scenes[e]=t}loadScene(e){if(this.currentScene!==e){if(!this.scenes[e])throw new Error("Scene "+e+" not found");this.currentScene&&this.scenes[this.currentScene].deload(),this.currentScene=e,this.game.currentScene=this.scenes[e],this.game.getHUD().setState("main"),this.scenes[e].initalizeScene()}}update(){}draw(e){}}class $t{constructor(e){s(this,"game");s(this,"state");s(this,"orderButton");s(this,"riceButton");s(this,"rollButton");s(this,"sidesButton");this.game=e,this.state="main",this.orderButton=m.imageButton(e,102,694,"./assets/button/Order_Button.JPG",()=>this.loadSceneCallback("order")),this.riceButton=m.imageButton(e,318,694,"./assets/button/Rice_Button.JPG",()=>this.loadSceneCallback("rice")),this.rollButton=m.imageButton(e,534,694,"./assets/button/Roll_Button.JPG",()=>this.loadSceneCallback("roll")),this.sidesButton=m.imageButton(e,750,694,"./assets/button/Side_Button.JPG",()=>this.loadSceneCallback("sides")),e.addEntity(this.orderButton),e.addEntity(this.riceButton),e.addEntity(this.rollButton),e.addEntity(this.sidesButton)}loadSceneCallback(e){if(!this.game.sceneManager)throw new Error("SceneManager is not initialized");this.game.sceneManager.loadScene(e)}update(){switch(this.state){case"main":this.orderButton.hidden=!1,this.riceButton.hidden=!1,this.rollButton.hidden=!1,this.sidesButton.hidden=!1;break;case"hidden":this.orderButton.hidden=!0,this.riceButton.hidden=!0,this.rollButton.hidden=!0,this.sidesButton.hidden=!0;break;default:console.warn(`Unknown state: ${this.state}`);break}}draw(e){}setState(e){this.state=e}}const o=new K;let M;o.queueDownload("./assets/backgrounds/Rice_Background.JPG");o.queueDownload("./assets/backgrounds/Roll_Background.JPG");o.queueDownload("./assets/backgrounds/Order_Background.png");o.queueDownload("./assets/backgrounds/Order_Foreground.png");o.queueDownload("./assets/backgrounds/Station_Background.png");o.queueDownload("./assets/backgrounds/Minigame_Background.png");o.queueDownload("./assets/backgrounds/Title_Background.png");o.queueDownload("./assets/objects/RiceCooker.png");o.queueDownload("./assets/objects/BambooMat.png");o.queueDownload("./assets/objects/Rice.png");o.queueDownload("./assets/objects/Rice_Cooked.png");o.queueDownload("./assets/objects/Nori.png");o.queueDownload("./assets/objects/Nori_Source.png");o.queueDownload("./assets/button/Rice_Button.JPG");o.queueDownload("./assets/button/Roll_Button.JPG");o.queueDownload("./assets/button/Side_Button.JPG");o.queueDownload("./assets/button/Order_Button.JPG");o.queueDownload("./assets/button/Start_Button.png");o.queueDownload("./assets/assembly/case.jpg");o.queueDownload("./assets/assembly/tray.jpg");o.queueDownload("./assets/hand.png");o.queueDownload("./assets/pot_top.png");o.queueDownload("./assets/pot_top_outside.png");o.queueDownload("./assets/rotate.png");o.queueDownload("./assets/checkmark.png");o.queueDownload("./assets/objects/Faucet_Off.png");o.queueDownload("./assets/objects/Faucet_On.png");o.queueDownload("./assets/objects/Pot_Animation.png");o.queueDownload("./assets/backgrounds/FillThePot_Background.png");o.queueDownload("./assets/objects/RiceCooker_On.png");o.queueDownload("./assets/objects/RiceCooker_Off.png");o.queueDownload("./assets/flies.png");o.queueDownload("./assets/swatter.png");o.queueDownload("./assets/characters/dummy.png");o.queueDownload("./assets/button/exclam.png");o.queueDownload("./assets/assembly/crab.png");o.queueDownload("./assets/assembly/cucumber.png");o.queueDownload("./assets/assembly/tuna.png");o.queueDownload("./assets/assembly/avocado.png");o.queueDownload("./assets/assembly/salmon.png");o.queueDownload("./assets/assembly/uni.png");o.queueDownload("./assets/assembly/tamago.png");o.queueDownload("./assets/assembly/octopus.png");o.queueDownload("./assets/characters/Customer_0.png");o.queueDownload("./assets/characters/Customer_1.png");o.queueDownload("./assets/characters/Customer_2.png");o.queueDownload("./assets/characters/Customer_3.png");o.queueDownload("./assets/characters/Customer_4.png");o.queueDownload("./assets/characters/Customer_5.png");o.queueDownload("./assets/trays/tray_avocado.png");o.queueDownload("./assets/trays/tray_crab.png");o.queueDownload("./assets/trays/tray_cucumber.png");o.queueDownload("./assets/trays/tray_octopus.png");o.queueDownload("./assets/trays/tray_salmon.png");o.queueDownload("./assets/trays/tray_tamago.png");o.queueDownload("./assets/trays/tray_tuna.png");o.queueDownload("./assets/trays/tray_uni.png");o.queueDownload("./assets/trays/tray_empty.png");o.queueDownload("./assets/sides/microwave.png");o.queueDownload("./assets/sides/Tofu.png");o.queueDownload("./assets/sides/MisoBin.png");o.queueDownload("./assets/sides/greenonions.png");o.queueDownload("./assets/sides/Ginger.png");o.queueDownload("./assets/sides/edamame.png");o.queueDownload("./assets/sides/Tray.png");o.queueDownload("./assets/sides/soysauce.png");o.queueDownload("./assets/sides/wasabi.png");o.queueDownload("./assets/sides/Gyoza.png");o.queueDownload("./assets/sides/MisoSoup.png");o.queueDownload("./assets/sides/Karaage.png");o.queueDownload("./assets/sides/chicken.png");o.queueDownload("./assets/sounds/jingle.mp3");o.queueDownload("./assets/sounds/doorchime.mp3");o.queueDownload("./assets/sounds/background_music.mp3");o.downloadAll(()=>{const r=new J({debugging:!1}),e=document.getElementById("gameWorld");if(!e)throw new Error("Canvas element not found");const t=e.getContext("2d");if(!t)throw new Error("Canvas context not found");r.init(t);let i=new $t(r);r.addEntity(i),r.hud=i,M=new Kt(r),r.addEntity(M),r.sceneManager=M,r.start()});window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||((r,e)=>{window.setTimeout(r,1e3/60)});
//# sourceMappingURL=index-CHHQqvk9.js.map
